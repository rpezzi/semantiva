eir_series:
  name: EIRv1
  series_version: 1
  ledger_policy:
    kind: "historical_snapshots"
    meaning:
      - "This file is a historical ledger of per-epic snapshots (checksums + compiled identities)."
      - "Values under phase_*.*.checksums are authoritative ONLY for that epic snapshot."
      - "Checksums MAY differ across epics (e.g., schema SHA when the schema evolved during the series)."
    automation_guidance:
      - "Do not treat phase_*.*.checksums as a 'latest state' across the repo."
      - "If an automation needs a 'current' checksum, it must select a specific epic snapshot (typically the latest landed epic for that phase) and compare only against that snapshot."
  phase_0:
    scaffold:
      epic: P0a
      status: present
      artifacts:
      - docs/source/eir/eir_program_charter.rst
      - docs/source/eir/eir_series_status.yaml
      - semantiva/eir/README.md
      - tests/eir_reference_suite/float_ref_01.yaml
      - tests/eir_reference_suite/float_ref_02.yaml
    contracts_io_inference:
      epic: P0b
      status: present
      artifacts:
      - semantiva/contracts/expectations.py
      - semantiva/contracts/messages.py
      - docs/source/contracts.rst
      - docs/source/contracts_catalog.md
      - tests/contracts_sva/test_sva220_io_inference.py
  phase_2:
    eir_scaffold_and_classic_compiler:
      epic: C0
      status: present
      artifacts:
        - semantiva/eir/compiler.py
        - semantiva/eir/schema/eir_v1.schema.json
        - docs/source/eir/eir_schema_v1.rst
        - tests/eir_compiler/test_compile_eir_determinism.py
        - tests/eir_compiler/test_compile_eir_schema_validation.py
        - tests/eir_compiler/test_compile_eir_ledger_golden_identities.py
        - tests/eir_compiler/test_eir_id_includes_semantics.py
      notes:
        - "compile_eir_v1 produces classic scalar EIR only"
        - "eir_id excludes build/source metadata (created_at etc.)"
        - "eir_id includes semantics+lineage in canonical hash input (empty in C0; populated in C1+)"
      checksums:
        eir_schema_v1_sha256: "26466736018b6845f948e8158c389d380cc81ab2d613f741030b624b9619dbf9"
        float_ref_01_compiled_identity:
          pipeline_id: "plid-e5aea3f84249459993711efd3860e0957aa0c738585304d7d680f3abccc717f3"
          pipeline_variant_id: "pvid-736e0a598fa3b86f672a8a8b8a5f4ac5414692764743f4894d8efe74a68793d5"
          eir_id: "eirid-00f4fa3365479b02935861c1b3e488bfdd411b7ecad5eac5dffab2e63534cfee"
    eir_compiler_poc_forms_and_slots:
      epic: C1
      status: present
      artifacts:
        - semantiva/eir/compiler.py
        - semantiva/eir/schema/eir_v1.schema.json
        - tests/eir_compiler/test_compile_eir_reference_suite_schema_validation.py
        - tests/eir_compiler/test_compile_eir_reference_suite_semantics.py
        - tests/eir_compiler/test_compile_eir_ledger_golden_identities.py
        - tests/eir_compiler/test_eir_id_includes_semantics.py
      notes:
        - "compile_eir_v1 loads YAML extensions (best-effort) to resolve processor symbols"
        - "compile_eir_v1 emits semantics.payload_forms + semantics.slots deterministically"
        - "eir_id hashes graph/parameters/plan/semantics/lineage and excludes build/source"
      checksums:
        eir_schema_v1_sha256: "3184521ddba89a4eaefbee345017969179c3452d2e386f05bc95871e9222b69b"
        compiled_identities:
          float_ref_01:
            pipeline_id: "plid-0a73a3ace43f7cd7702c0c19a32ff8dcf392fa03a1fecb9d3c1b86f735121ccb"
            pipeline_variant_id: "pvid-bb31791ff0110c1c0c409a77d13d7c143c942b18faf0f6e048c48e10fd2edea5"
            eir_id: "eirid-6197a888a98f3aeff79e4ec4e36aab52bc8ef4b1afe3d30fcb0713cffa9b2823"
          float_ref_02:
            pipeline_id: "plid-49e23aa7604efef7f00554fdef349e0c5ab06db13b8a96049c7255d174885b61"
            pipeline_variant_id: "pvid-0f3b558abe16b33971ab82d51657a849813a76bc98fe188bc4b4219cd5cab5f2"
            eir_id: "eirid-131224c15f86d8dcc2300953e9ee4e040df595e86478a00e9d80c749f2c6459f"
          float_ref_channel_01:
            pipeline_id: "plid-fb115f78ce13fbfbc92707d74e5f269c62c1ea736f725c05294ce929d34f65ec"
            pipeline_variant_id: "pvid-cdfd9a807569f6e9b5b50d5c2b58fcf0111761b93a5f71a8d58dd624707874ba"
            eir_id: "eirid-8109934f107dc75b2761feb74b8508c9ecfbdd3f08e475b8c080b2168f0a86e3"
          float_ref_slots_01:
            pipeline_id: "plid-e208eaedfa03ce4dbcc66f0f09b74025126f8fad06f7e9242f9a249af39e5f0b"
            pipeline_variant_id: "pvid-23ce317eeb5f8bd5ccf97268687346d8086601fb92b3d12798353be66652efe4"
            eir_id: "eirid-7090cb7cb94a75072efd8020f9e71fc15cfff989f067212cbe63f025a4b2e60d"
          float_ref_lane_01:
            pipeline_id: "plid-9dbf70cc5fa63a870384179b1ad1616d79b30c234f4c96d7841ec809c5688579"
            pipeline_variant_id: "pvid-59af43432f1c1712c206304f2d2c1bebfddba64b90533a6e35a4f6d3016657de"
            eir_id: "eirid-b0d3a78eb1f2d60a19bf094b11fb57cf32677e4e8c576f7384647d89885775f2"
  phase_3:
    r0a_eir_scalar_execution_harness:
      epic: R0a
      status: present
      artifacts:
        - semantiva/eir/execution_scalar.py
        - semantiva/eir/compiler.py
        - tests/eir_runtime/test_execute_eir_scalar_reference_suite.py
      notes:
        - "Internal-only EIR execution for classic scalar plans (classic_linear), no parity, no switch."
        - "Runtime-only probe context_key and YAML extensions are carried under eir.source (excluded from eir_id)."
    r0a_demo_in_process_example:
      epic: R0a-demo
      status: present
      artifacts:
        - examples/eir/run_float_ref_01_in_process.py
        - examples/eir/README.md
        - tests/eir_runtime/test_eir_examples_demo_runs.py
      notes:
        - "Developer-facing, in-process example for executing float_ref_01 via EIR scalar harness."
        - "Regression test ensures demo remains runnable and stable across refactoring."
    r0b_eir_scalar_parity_validation:
      epic: R0b
      status: complete
      date: "2025-12-14"
      artifacts:
        - tests/eir_runtime/test_eir_scalar_parity_reference_suite.py
        - tests/eir_reference_suite/float_ref_01.yaml
        - tests/eir_reference_suite/float_ref_02.yaml
      notes:
        - "Parity validation: legacy classic scalar execution vs EIR scalar execution (float_ref_01, float_ref_02)."
        - "Parity defined as data equality + context equality, no runtime switch."
    r0c_execution_path_selection_opt_in:
      epic: R0c
      status: present
      date: "2025-12-14"
      artifacts:
        - semantiva/eir/runtime.py
        - semantiva/execution/orchestrator/orchestrator.py
        - tests/eir_runtime/test_orchestrator_eir_opt_in.py
        - tests/eir_runtime/test_trace_equivalence_opt_in_scalar.py
      notes:
        - "Adds opt-in execution_backend selector; default remains legacy."
        - "EIR path is scalar-only classic_linear via R0a harness; parity proven in R0b."
  phase_fp:
    fp0a_python_reference_suite_scalar:
      epic: FP0a
      status: present
      date: "2025-12-14"
      artifacts:
        - tests/eir_reference_suite_python/float_ref_01.py
        - tests/eir_reference_suite_python/float_ref_02.py
        - tests/eir_runtime/test_python_reference_suite_smoke.py
      notes:
        - "Adds Python peer frontend inputs for scalar reference suite."
        - "Smoke coverage: legacy execution and EIR scalar harness both run from Python specs."
        - "No canonical-spec parity claims yet (FP0b/FP0c)."
    fp0a1_processor_ref_resolution:
      epic: FP0a1
      status: present
      date: "2025-12-14"
      artifacts:
        - semantiva/registry/resolve.py
        - semantiva/registry/processor_registry.py
        - tests/eir_frontend_parity/test_processor_ref_resolution_contract.py
      notes:
        - "Hardens processor reference resolution with dotted-FQN support."
        - "Ambiguous short-name resolution errors deterministically with fix instructions."
        - "Enables canonical ProcessorRefV1 contract for frontend parity."
      gates:
        - "Dotted-FQN resolution works"
        - "Ambiguous short-name resolution errors deterministically with fix instructions"
    fp0a2_processor_registry_stability:
      epic: FP0a2
      status: present
      date: "2025-12-14"
      artifacts:
        - semantiva/registry/processor_registry.py
        - semantiva/registry/resolve.py
        - tests/eir_frontend_parity/test_processor_ref_resolution_contract.py
      notes:
        - "Makes register_processor idempotent for same FQCN (no false ambiguity on reload)."
        - "Registers safe alias keyed by dotted-FQN string (enables stable repeated resolution)."
        - "Preserves short-name workflows; ambiguity still errors deterministically."
      gates:
        - "Short-name re-registration is idempotent"
        - "Dotted-FQN resolution registers stable alias key"
    fp0b_canonical_spec_parity_scalar:
      epic: FP0b
      status: present
      date: "2025-12-14"
      artifacts:
        - semantiva/pipeline/graph_builder.py
        - tests/eir_frontend_parity/_normalize.py
        - tests/eir_frontend_parity/test_canonical_spec_parity_scalar.py
        - tests/eir_frontend_parity/test_graph_builder_identity_contracts.py
      notes:
        - "CanonicalSpec parity gate: YAML vs Python peer specs match for scalar reference pipelines."
        - "Identity preserved for YAML: class refs canonicalize to short names unless ambiguous; ambiguity falls back to FQCN."
        - "Canonicalization remains pure: no extension loading / registry mutation side effects."
      gates:
        - "CanonicalSpec bytes parity passes for float_ref_01 and float_ref_02"
        - "pipeline_id parity passes for float_ref_01 and float_ref_02"
        - "Drift locks: _NODE_NAMESPACE frozen; no extension loading in canonicalization"
    fp0c0_fp0c_derisk_identity_boundary:
      epic: FP0c0
      status: present
      date: "2025-12-15"
      artifacts:
        - semantiva/eir/compiler.py
        - semantiva/registry/processor_registry.py
        - tests/eir_frontend_parity/conftest.py
        - tests/eir_frontend_parity/test_graph_builder_identity_contracts.py
        - tests/eir_frontend_parity/test_eir_compiler_processor_ref_fqcn_contract.py
      notes:
        - "Derisks FP0c by enforcing EIR processor identity as FQCN-only (registry-independent semantics)."
        - "Adds test isolation for ProcessorRegistry to prevent cross-test drift."
      gates:
        - "ProcessorRegistry mutations do not leak between tests"
        - "compile_eir_v1 emits dotted-FQCN processor_ref for float_ref_01/02"
        - "Ambiguous short-name in EIR compilation errors deterministically"
    fp0c_compiled_artifact_parity_scalar:
      epic: FP0c
      status: present
      date: "2025-12-15"
      artifacts:
        - tests/eir_frontend_parity/_normalize.py
        - tests/eir_frontend_parity/test_eir_semantics_parity_scalar.py
      notes:
        - "Compiled artifact parity gate: YAML vs Python compile to semantically identical EIRv1 for scalar reference pipelines."
        - "Equality is modulo provenance/build metadata (eir.source.*, build timestamps/tool strings)."
        - "Determinism check prevents provenance drift from leaking into semantic-bearing sections."
      gates:
        - "Normalized EIR bytes parity passes for float_ref_01 and float_ref_02 (YAML vs Python)"
        - "Schema validation passes for both frontends"
        - "Repeat-build determinism holds per frontend after normalization"
    fp0d_canonical_identity_finalization_fqcn_only:
      epic: FP0d
      status: present
      date: "2025-12-15"
      artifacts:
        - semantiva/pipeline/graph_builder.py
        - tests/eir_frontend_parity/test_graph_builder_identity_contracts.py
        - tests/eir_frontend_parity/test_canonical_spec_parity_scalar.py
      notes:
        - "ONE-TIME identity migration: CanonicalSpec processor_ref is now FQCN-only (<module>.<qualname>) for all nodes."
        - "Node configs accept either processor or processor_ref (mutually exclusive); ambiguous short names must error."
        - "Derived meaning remains (base processor_ref + derive payload); generated derived class identity is not semantic."
        - "After FP0d, identity canonicalization inputs are frozen for the series unless a new explicit identity epic is created (not planned)."
      compiled_identities:
        float_ref_01:
          pipeline_id: "plid-0a73a3ace43f7cd7702c0c19a32ff8dcf392fa03a1fecb9d3c1b86f735121ccb"
        float_ref_02:
          pipeline_id: "plid-49e23aa7604efef7f00554fdef349e0c5ab06db13b8a96049c7255d174885b61"
      gates:
        - "CanonicalSpec parity (FP0b) remains green for scalar refs with FQCN identity"
        - "Compiled artifact parity (FP0c) remains green for scalar refs"
        - "Identity contracts: mutual exclusion; ambiguity errors deterministic; no extension loading during canonicalization"
    fp1c_derived_processor_parity_scaffolding:
      epic: FP1c
      status: present
      date: "2025-12-16"
      artifacts:
        - tests/eir_reference_suite/float_ref_slice_01.yaml
        - tests/eir_reference_suite_python/float_ref_slice_01.py
        - tests/eir_reference_suite/float_ref_sweep_01.yaml
        - tests/eir_reference_suite_python/float_ref_sweep_01.py
        - tests/eir_frontend_parity/test_canonical_spec_parity_derived.py
        - tests/eir_runtime/test_legacy_execution_smoke_derived.py
        - semantiva/pipeline/graph_builder.py
        - semantiva/data_processors/data_slicer_factory.py
        - semantiva/examples/test_utils.py
      notes:
        - "Adds derived pipeline fixtures (slice + sweep) and enforces CanonicalSpec parity across YAML and Python."
        - "Derived meaning represented via CanonicalSpec.derive; generated class identity not used for pipeline/node identity."
      gates:
        - "CanonicalSpec bytes parity passes for float_ref_slice_01 and float_ref_sweep_01"
        - "pipeline_id parity passes for float_ref_slice_01 and float_ref_sweep_01"
        - "Legacy execution smoke passes for derived YAML and Python specs"
    fp2_runtime_parity_matrix_scalar:
      epic: FP2
      status: present
      date: "2025-12-16"
      artifacts:
        - tests/eir_runtime/test_runtime_parity_matrix_scalar.py
        - tests/eir_reference_suite/float_ref_01.yaml
        - tests/eir_reference_suite/float_ref_02.yaml
        - tests/eir_reference_suite_python/float_ref_01.py
        - tests/eir_reference_suite_python/float_ref_02.py
        - docs/source/eir/eir_series_status.yaml
      notes:
        - "Runtime parity gate for scalar reference suite using explicit 2×2 matrix (YAML/Python × legacy/EIR-scalar)."
        - "Parity definition is locked: float scalar values match exactly; context dictionaries match exactly."
        - "Includes recommended YAML-legacy vs Python-legacy comparison to prove frontend equivalence independent of EIR."
        - "Does not admit derived pipelines to EIR-backed runtime parity (those remain post-FP2)."
      gates:
        - "All four matrix cells execute for float_ref_01 and float_ref_02."
        - "YAML legacy == YAML EIR (locked parity)."
        - "Python legacy == Python EIR (locked parity)."
        - "YAML legacy == Python legacy (locked parity)."
    fp3_execution_path_selection_uniform_frontends:
      epic: FP3
      status: done
      date: "2025-12-16"
      artifacts:
        - semantiva/execution/orchestrator/orchestrator.py
        - semantiva/eir/runtime.py
        - tests/eir_runtime/test_opt_in_selection_uniform_frontends.py
        - tests/eir_runtime/test_orchestrator_eir_opt_in.py
        - tests/eir_runtime/test_trace_equivalence_opt_in_scalar.py
        - docs/source/eir/eir_series_status.yaml
      notes:
        - "Extends opt-in execution_backend='eir_scalar' routing to accept Python list-of-node-dicts pipeline specs."
        - "Legacy remains default; selector is now uniformly reachable from YAML and Python workflows."
        - "Adds regression locks for uniform selector reachability and trace equivalence."
      gates:
        - "Frontend parity program gate remains green (FP2)."
        - "Opt-in selector works for YAML and Python inputs."
        - "Legacy remains default for both frontends."
  reference_suite:
    float:
    - id: float_ref_01
      yaml_path: tests/eir_reference_suite/float_ref_01.yaml
      yaml_sha256: 24366dcfc0d3b726db02d61c0ae53c7f5a7d431307d1ee56ce08a71ed8e6e7df
      pipeline_id: plid-0a73a3ace43f7cd7702c0c19a32ff8dcf392fa03a1fecb9d3c1b86f735121ccb
      runtime_contract:
        initial_context:
          value: 1.0
          addend: 2.0
        expected:
          data_float: 3.0
          context_keys_added:
          - result
    - id: float_ref_02
      yaml_path: tests/eir_reference_suite/float_ref_02.yaml
      yaml_sha256: ecdfe8214c6085c57579b4d2bdaf02c9fa214b8f2a54df1b104eb9e6f82dff7e
      pipeline_id: plid-49e23aa7604efef7f00554fdef349e0c5ab06db13b8a96049c7255d174885b61
      runtime_contract:
        initial_context:
          value: 2.0
          factor: 10.0
          addend: -1.0
        expected:
          data_float: 19.0
          context_keys_added: []
    - id: float_ref_channel_01
      yaml_path: tests/eir_reference_suite/float_ref_channel_01.yaml
      yaml_sha256: 806457a3820b22259fc42572c9086f9c9f308afe6c5235152a65f4a36eeea338
      pipeline_id: plid-fb115f78ce13fbfbc92707d74e5f269c62c1ea736f725c05294ce929d34f65ec
      runtime_contract:
        initial_context:
          value: 1.5
          addend: 0.5
        expected:
          data_float: 2.0
          context_keys_added: []
    - id: float_ref_slots_01
      yaml_path: tests/eir_reference_suite/float_ref_slots_01.yaml
      yaml_sha256: 629c53586857ce190276fa51a3d423be538afe3e101dc4906aabfe0cd8216202
      pipeline_id: plid-e208eaedfa03ce4dbcc66f0f09b74025126f8fad06f7e9242f9a249af39e5f0b
      runtime_contract:
        initial_context:
          value: 1.0
          other: FloatDataType(2.0) via test harness injection
        expected:
          data_float: 3.0
          context_keys_added: []
    - id: float_ref_lane_01
      yaml_path: tests/eir_reference_suite/float_ref_lane_01.yaml
      yaml_sha256: a801419b24edbae9440e51dd8558c7f9339c1b15464d4aea2198f1cfdcd8df03
      pipeline_id: plid-9dbf70cc5fa63a870384179b1ad1616d79b30c234f4c96d7841ec809c5688579
      runtime_contract:
        initial_context:
          lane_values:
            a: 1.0
            b: 2.0
          addend: 0.5
        expected:
          data_float: 2.5
          context_keys_added: []
    - id: float_ref_slice_01
      yaml_path: tests/eir_reference_suite/float_ref_slice_01.yaml
      yaml_sha256: 85f45f76a8f921d562efeb3535f4a7724b61e87b43b42fe20628d20c7c6577a4
      pipeline_id: plid-e90b46d926ef5d4bd88a9c7589628e4427cd81a6ca6f590094370b349774fde8
      runtime_contract:
        initial_context:
          values:
          - 1.0
          - 2.0
          - 3.0
          factor: 10.0
        expected:
          data_float: 60.0
          context_keys_added:
          - result
    - id: float_ref_sweep_01
      yaml_path: tests/eir_reference_suite/float_ref_sweep_01.yaml
      yaml_sha256: 8df1d5b5dc0689e50e183a56691bdaff3ca5e8fa320848802484bfc2f16b8839
      pipeline_id: plid-6b59fca9bb30f77e12516de45983ef6e398205aa2e7a883a3387f3152ef72d6e
      runtime_contract:
        initial_context:
          value: 1.0
        expected:
          data_float: 9.0
          context_keys_added:
          - result
  last_updated:
    epic: FP1c
    date: "2025-12-16"
    note: "Added derived processor parity scaffolding (slice + sweep) reference pipelines and CanonicalSpec parity tests."
