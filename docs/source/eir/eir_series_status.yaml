eir_series:
  name: EIRv1
  series_version: 1
  ledger_policy:
    kind: "historical_snapshots"
    meaning:
      - "This file is a historical ledger of per-epic snapshots (checksums + compiled identities)."
      - "Values under phase_*.*.checksums are authoritative ONLY for that epic snapshot."
      - "Checksums MAY differ across epics (e.g., schema SHA when the schema evolved during the series)."
    automation_guidance:
      - "Do not treat phase_*.*.checksums as a 'latest state' across the repo."
      - "If an automation needs a 'current' checksum, it must select a specific epic snapshot (typically the latest landed epic for that phase) and compare only against that snapshot."
  phase_0:
    scaffold:
      epic: P0a
      status: present
      artifacts:
      - docs/source/eir/eir_program_charter.rst
      - docs/source/eir/eir_series_status.yaml
      - semantiva/eir/README.md
      - tests/eir_reference_suite/float_ref_01.yaml
      - tests/eir_reference_suite/float_ref_02.yaml
    contracts_io_inference:
      epic: P0b
      status: present
      artifacts:
      - semantiva/contracts/expectations.py
      - semantiva/contracts/messages.py
      - docs/source/contracts.rst
      - docs/source/contracts_catalog.md
      - tests/contracts_sva/test_sva220_io_inference.py
  phase_2:
    eir_scaffold_and_classic_compiler:
      epic: C0
      status: present
      artifacts:
        - semantiva/eir/compiler.py
        - semantiva/eir/schema/eir_v1.schema.json
        - docs/source/eir/eir_schema_v1.rst
        - tests/eir_compiler/test_compile_eir_determinism.py
        - tests/eir_compiler/test_compile_eir_schema_validation.py
        - tests/eir_compiler/test_compile_eir_ledger_golden_identities.py
        - tests/eir_compiler/test_eir_id_includes_semantics.py
      notes:
        - "compile_eir_v1 produces classic scalar EIR only"
        - "eir_id excludes build/source metadata (created_at etc.)"
        - "eir_id includes semantics+lineage in canonical hash input (empty in C0; populated in C1+)"
      checksums:
        eir_schema_v1_sha256: "26466736018b6845f948e8158c389d380cc81ab2d613f741030b624b9619dbf9"
        float_ref_01_compiled_identity:
          pipeline_id: "plid-e5aea3f84249459993711efd3860e0957aa0c738585304d7d680f3abccc717f3"
          pipeline_variant_id: "pvid-736e0a598fa3b86f672a8a8b8a5f4ac5414692764743f4894d8efe74a68793d5"
          eir_id: "eirid-00f4fa3365479b02935861c1b3e488bfdd411b7ecad5eac5dffab2e63534cfee"
    eir_compiler_poc_forms_and_slots:
      epic: C1
      status: present
      artifacts:
        - semantiva/eir/compiler.py
        - semantiva/eir/schema/eir_v1.schema.json
        - tests/eir_compiler/test_compile_eir_reference_suite_schema_validation.py
        - tests/eir_compiler/test_compile_eir_reference_suite_semantics.py
        - tests/eir_compiler/test_compile_eir_ledger_golden_identities.py
        - tests/eir_compiler/test_eir_id_includes_semantics.py
      notes:
        - "compile_eir_v1 loads YAML extensions (best-effort) to resolve processor symbols"
        - "compile_eir_v1 emits semantics.payload_forms + semantics.slots deterministically"
        - "eir_id hashes graph/parameters/plan/semantics/lineage and excludes build/source"
      checksums:
        eir_schema_v1_sha256: "3184521ddba89a4eaefbee345017969179c3452d2e386f05bc95871e9222b69b"
        compiled_identities:
          float_ref_01:
            pipeline_id: "plid-e5aea3f84249459993711efd3860e0957aa0c738585304d7d680f3abccc717f3"
            pipeline_variant_id: "pvid-10450164ecd56153085f6c777a3369f2fd135c03a87de70630b368300d7ccd72"
            eir_id: "eirid-b74100b54e2713e5781709aca737abc1988f5e6ec680a1d10425cd954a828e6d"
          float_ref_02:
            pipeline_id: "plid-dbf8fa82954040c7262e23f3722707f9e7213ae9bf1ceba047198065fc29620e"
            pipeline_variant_id: "pvid-bd539ba2035d3e772492d6735e71835a4b786ac626d468d31a5e09d5a3cf2a82"
            eir_id: "eirid-411f409b0f546c5e88dc944a809abc8b2d32d81344d184a85f84404df0039917"
          float_ref_channel_01:
            pipeline_id: "plid-cc1fa01b97231217e0a2ad472d95be1789864c3a11a1c6fee3999909a0ba629a"
            pipeline_variant_id: "pvid-b71795f71e248ae479d3dcdc0f5b65f30d74d0afe32c7637a5663f5ae368b30e"
            eir_id: "eirid-195922a9db9aa39aef7ce7e92769e0f9dfb43d468ff31304eca9db98defd9420"
          float_ref_slots_01:
            pipeline_id: "plid-cc88682c597f0eebe6c34653b114665645b331218bf343171955908be6f3b79c"
            pipeline_variant_id: "pvid-0cf88a9c26ceeefb909ca8744ca7b784899ff197314697e45c42cb154dae4ed3"
            eir_id: "eirid-52fe68d42e14fe38368bbfb8ea671c8fabaf30ba27cfc48b5a56093f4f18e6dc"
          float_ref_lane_01:
            pipeline_id: "plid-5e25e7a153ea053946caf69160744c53649be5836c437789ff5f7d912e646cbc"
            pipeline_variant_id: "pvid-c923fbf9200928a5953c1aaf6b16cbe8877c196d25042c1fd2d653bd4c84fbc5"
            eir_id: "eirid-241a8f2eae8c530e422c4a996fac8e5124937624a39f983102707a498f23a0c1"
  phase_3:
    r0a_eir_scalar_execution_harness:
      epic: R0a
      status: present
      artifacts:
        - semantiva/eir/execution_scalar.py
        - semantiva/eir/compiler.py
        - tests/eir_runtime/test_execute_eir_scalar_reference_suite.py
      notes:
        - "Internal-only EIR execution for classic scalar plans (classic_linear), no parity, no switch."
        - "Runtime-only probe context_key and YAML extensions are carried under eir.source (excluded from eir_id)."
    r0a_demo_in_process_example:
      epic: R0a-demo
      status: present
      artifacts:
        - examples/eir/run_float_ref_01_in_process.py
        - examples/eir/README.md
        - tests/eir_runtime/test_eir_examples_demo_runs.py
      notes:
        - "Developer-facing, in-process example for executing float_ref_01 via EIR scalar harness."
        - "Regression test ensures demo remains runnable and stable across refactoring."
    r0b_eir_scalar_parity_validation:
      epic: R0b
      status: complete
      date: "2025-12-14"
      artifacts:
        - tests/eir_runtime/test_eir_scalar_parity_reference_suite.py
        - tests/eir_reference_suite/float_ref_01.yaml
        - tests/eir_reference_suite/float_ref_02.yaml
      notes:
        - "Parity validation: legacy classic scalar execution vs EIR scalar execution (float_ref_01, float_ref_02)."
        - "Parity defined as data equality + context equality, no runtime switch."
    r0c_execution_path_selection_opt_in:
      epic: R0c
      status: present
      date: "2025-12-14"
      artifacts:
        - semantiva/eir/runtime.py
        - semantiva/execution/orchestrator/orchestrator.py
        - tests/eir_runtime/test_orchestrator_eir_opt_in.py
        - tests/eir_runtime/test_trace_equivalence_opt_in_scalar.py
      notes:
        - "Adds opt-in execution_backend selector; default remains legacy."
        - "EIR path is scalar-only classic_linear via R0a harness; parity proven in R0b."
  phase_fp:
    fp0a_python_reference_suite_scalar:
      epic: FP0a
      status: present
      date: "2025-12-14"
      artifacts:
        - tests/eir_reference_suite_python/float_ref_01.py
        - tests/eir_reference_suite_python/float_ref_02.py
        - tests/eir_runtime/test_python_reference_suite_smoke.py
      notes:
        - "Adds Python peer frontend inputs for scalar reference suite."
        - "Smoke coverage: legacy execution and EIR scalar harness both run from Python specs."
        - "No canonical-spec parity claims yet (FP0b/FP0c)."
    fp0a1_processor_ref_resolution:
      epic: FP0a1
      status: present
      date: "2025-12-14"
      artifacts:
        - semantiva/registry/resolve.py
        - semantiva/registry/processor_registry.py
        - tests/eir_frontend_parity/test_processor_ref_resolution_contract.py
      notes:
        - "Hardens processor reference resolution with dotted-FQN support."
        - "Ambiguous short-name resolution errors deterministically with fix instructions."
        - "Enables canonical ProcessorRefV1 contract for frontend parity."
      gates:
        - "Dotted-FQN resolution works"
        - "Ambiguous short-name resolution errors deterministically with fix instructions"
    fp0a2_processor_registry_stability:
      epic: FP0a2
      status: present
      date: "2025-12-14"
      artifacts:
        - semantiva/registry/processor_registry.py
        - semantiva/registry/resolve.py
        - tests/eir_frontend_parity/test_processor_ref_resolution_contract.py
      notes:
        - "Makes register_processor idempotent for same FQCN (no false ambiguity on reload)."
        - "Registers safe alias keyed by dotted-FQN string (enables stable repeated resolution)."
        - "Preserves short-name workflows; ambiguity still errors deterministically."
      gates:
        - "Short-name re-registration is idempotent"
        - "Dotted-FQN resolution registers stable alias key"
    fp0b_canonical_spec_parity_scalar:
      epic: FP0b
      status: present
      date: "2025-12-14"
      artifacts:
        - semantiva/pipeline/graph_builder.py
        - tests/eir_frontend_parity/_normalize.py
        - tests/eir_frontend_parity/test_canonical_spec_parity_scalar.py
        - tests/eir_frontend_parity/test_graph_builder_identity_contracts.py
      notes:
        - "CanonicalSpec parity gate: YAML vs Python peer specs match for scalar reference pipelines."
        - "Identity preserved for YAML: class refs canonicalize to short names unless ambiguous; ambiguity falls back to FQCN."
        - "Canonicalization remains pure: no extension loading / registry mutation side effects."
      gates:
        - "CanonicalSpec bytes parity passes for float_ref_01 and float_ref_02"
        - "pipeline_id parity passes for float_ref_01 and float_ref_02"
        - "Drift locks: _NODE_NAMESPACE frozen; no extension loading in canonicalization"
    fp0c0_fp0c_derisk_identity_boundary:
      epic: FP0c0
      status: present
      date: "2025-12-15"
      artifacts:
        - semantiva/eir/compiler.py
        - semantiva/registry/processor_registry.py
        - tests/eir_frontend_parity/conftest.py
        - tests/eir_frontend_parity/test_graph_builder_identity_contracts.py
        - tests/eir_frontend_parity/test_eir_compiler_processor_ref_fqcn_contract.py
      notes:
        - "Derisks FP0c by enforcing EIR processor identity as FQCN-only (registry-independent semantics)."
        - "Adds test isolation for ProcessorRegistry to prevent cross-test drift."
      gates:
        - "ProcessorRegistry mutations do not leak between tests"
        - "compile_eir_v1 emits dotted-FQCN processor_ref for float_ref_01/02"
        - "Ambiguous short-name in EIR compilation errors deterministically"
    fp0c_compiled_artifact_parity_scalar:
      epic: FP0c
      status: present
      date: "2025-12-15"
      artifacts:
        - tests/eir_frontend_parity/_normalize.py
        - tests/eir_frontend_parity/test_eir_semantics_parity_scalar.py
      notes:
        - "Compiled artifact parity gate: YAML vs Python compile to semantically identical EIRv1 for scalar reference pipelines."
        - "Equality is modulo provenance/build metadata (eir.source.*, build timestamps/tool strings)."
        - "Determinism check prevents provenance drift from leaking into semantic-bearing sections."
      gates:
        - "Normalized EIR bytes parity passes for float_ref_01 and float_ref_02 (YAML vs Python)"
        - "Schema validation passes for both frontends"
        - "Repeat-build determinism holds per frontend after normalization"
  reference_suite:
    float:
    - id: float_ref_01
      yaml_path: tests/eir_reference_suite/float_ref_01.yaml
      yaml_sha256: 24366dcfc0d3b726db02d61c0ae53c7f5a7d431307d1ee56ce08a71ed8e6e7df
      pipeline_id: plid-e5aea3f84249459993711efd3860e0957aa0c738585304d7d680f3abccc717f3
      runtime_contract:
        initial_context:
          value: 1.0
          addend: 2.0
        expected:
          data_float: 3.0
          context_keys_added:
          - result
    - id: float_ref_02
      yaml_path: tests/eir_reference_suite/float_ref_02.yaml
      yaml_sha256: ecdfe8214c6085c57579b4d2bdaf02c9fa214b8f2a54df1b104eb9e6f82dff7e
      pipeline_id: plid-dbf8fa82954040c7262e23f3722707f9e7213ae9bf1ceba047198065fc29620e
      runtime_contract:
        initial_context:
          value: 2.0
          factor: 10.0
          addend: -1.0
        expected:
          data_float: 19.0
          context_keys_added: []
    - id: float_ref_channel_01
      yaml_path: tests/eir_reference_suite/float_ref_channel_01.yaml
      yaml_sha256: 806457a3820b22259fc42572c9086f9c9f308afe6c5235152a65f4a36eeea338
      pipeline_id: plid-cc1fa01b97231217e0a2ad472d95be1789864c3a11a1c6fee3999909a0ba629a
      runtime_contract:
        initial_context:
          value: 1.5
          addend: 0.5
        expected:
          data_float: 2.0
          context_keys_added: []
    - id: float_ref_slots_01
      yaml_path: tests/eir_reference_suite/float_ref_slots_01.yaml
      yaml_sha256: 629c53586857ce190276fa51a3d423be538afe3e101dc4906aabfe0cd8216202
      pipeline_id: plid-cc88682c597f0eebe6c34653b114665645b331218bf343171955908be6f3b79c
      runtime_contract:
        initial_context:
          value: 1.0
          other: FloatDataType(2.0) via test harness injection
        expected:
          data_float: 3.0
          context_keys_added: []
    - id: float_ref_lane_01
      yaml_path: tests/eir_reference_suite/float_ref_lane_01.yaml
      yaml_sha256: a801419b24edbae9440e51dd8558c7f9339c1b15464d4aea2198f1cfdcd8df03
      pipeline_id: plid-5e25e7a153ea053946caf69160744c53649be5836c437789ff5f7d912e646cbc
      runtime_contract:
        initial_context:
          lane_values:
            a: 1.0
            b: 2.0
          addend: 0.5
        expected:
          data_float: 2.5
          context_keys_added: []
  last_updated:
    epic: FP0c
    date: "2025-12-15"
